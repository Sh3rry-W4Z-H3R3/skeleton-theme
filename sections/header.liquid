<header class="agh-header">
  <div class="header-container">
    <!-- Logo/Brand -->
    <div class="header-brand">
      <a href="{{ routes.root_url }}" class="brand-link">
        <h1 class="brand-title">{{ shop.name }}</h1>
      </a>
    </div>

    <!-- Desktop Navigation -->
    <nav class="header-nav desktop-nav">
      {% for link in section.settings.menu.links %}
        <a href="{{ link.url }}" class="nav-link">{{ link.title }}</a>
      {% endfor %}
    </nav>

    <!-- Search Bar -->
    <div class="header-search">
      <form action="{{ routes.search_url }}" method="get" class="search-form">
        <div class="search-input-group">
          <input
            type="search"
            name="q"
            placeholder="Search garden furniture..."
            class="search-input"
            value="{{ search.terms | escape }}"
          >
          <button type="submit" class="search-btn" aria-label="Search">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14Z" fill="currentColor"/>
            </svg>
          </button>
        </div>
      </form>
    </div>

    <!-- Header Icons -->
    <div class="header-icons">
      {% if shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" class="icon-link" aria-label="Account">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" fill="currentColor"/>
          </svg>
        </a>
      {% endif %}

      <a href="{{ routes.cart_url }}" class="icon-link cart-link" aria-label="Cart">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5H5.21L4.27,3H1M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z" fill="currentColor"/>
        </svg>
        {% if cart.item_count > 0 %}
          <span class="cart-count">{{ cart.item_count }}</span>
        {% endif %}
      </a>

      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation Overlay -->
  <div class="mobile-nav-overlay">
    <nav class="mobile-nav">
      <div class="mobile-search">
        <form action="{{ routes.search_url }}" method="get" class="mobile-search-form">
          <input
            type="search"
            name="q"
            placeholder="Search garden furniture..."
            class="mobile-search-input"
            value="{{ search.terms | escape }}"
          >
          <button type="submit" class="mobile-search-btn" aria-label="Search">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14Z" fill="currentColor"/>
            </svg>
          </button>
        </form>
      </div>

      <div class="mobile-menu-links">
        {% for link in section.settings.menu.links %}
          <a href="{{ link.url }}" class="mobile-nav-link">{{ link.title }}</a>
        {% endfor %}
      </div>

      <div class="mobile-menu-footer">
        {% if shop.customer_accounts_enabled %}
          <a href="{{ routes.account_url }}" class="mobile-account-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" fill="currentColor"/>
            </svg>
            Account
          </a>
        {% endif %}
      </div>
    </nav>
  </div>
</header>

{% stylesheet %}
  .agh-header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: #fbfcff;
    border-bottom: 1px solid #e3f5d7;
    box-shadow: 0 2px 8px rgba(28, 66, 25, 0.1);
  }

  .header-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 70px;
  }

  /* Brand */
  .header-brand {
    flex-shrink: 0;
  }

  .brand-link {
    text-decoration: none;
    color: #1c4219;
  }

  .brand-title {
    font-family: 'Futura', sans-serif;
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0;
    color: #1c4219;
  }

  /* Desktop Navigation */
  .desktop-nav {
    display: flex;
    gap: 2rem;
    margin: 0 2rem;
  }

  .nav-link {
    text-decoration: none;
    color: #1c4219;
    font-weight: 500;
    transition: color 0.2s ease;
    position: relative;
  }

  .nav-link:hover {
    color: #558d4b;
  }

  .nav-link::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: #1c4219;
    transition: width 0.2s ease;
  }

  .nav-link:hover::after {
    width: 100%;
  }

  /* Search */
  .header-search {
    flex: 1;
    max-width: 400px;
    margin: 0 1rem;
  }

  .search-form {
    width: 100%;
  }

  .search-input-group {
    position: relative;
    display: flex;
    align-items: center;
  }

  .search-input {
    width: 100%;
    padding: 0.75rem 1rem;
    padding-right: 3rem;
    border: 1px solid #c4ecb1;
    border-radius: 8px;
    font-size: 1rem;
    background: #fbfcff;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

  .search-input:focus {
    outline: none;
    border-color: #1c4219;
    box-shadow: 0 0 0 3px rgba(28, 66, 25, 0.1);
  }

  .search-btn {
    position: absolute;
    right: 0.5rem;
    background: none;
    border: none;
    color: #558d4b;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 4px;
    transition: color 0.2s ease, background-color 0.2s ease;
  }

  .search-btn:hover {
    color: #1c4219;
    background-color: #e3f5d7;
  }

  /* Header Icons */
  .header-icons {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .icon-link {
    position: relative;
    color: #1c4219;
    text-decoration: none;
    padding: 0.5rem;
    border-radius: 6px;
    transition: color 0.2s ease, background-color 0.2s ease;
  }

  .icon-link:hover {
    color: #558d4b;
    background-color: #e3f5d7;
  }

  .cart-count {
    position: absolute;
    top: 0;
    right: 0;
    background: #1c4219;
    color: #fbfcff;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.125rem 0.375rem;
    border-radius: 10px;
    min-width: 18px;
    text-align: center;
  }

  /* Mobile Menu Toggle */
  .mobile-menu-toggle {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    gap: 4px;
    z-index: 1001;
  }

  .hamburger-line {
    width: 24px;
    height: 2px;
    background: #1c4219;
    transition: all 0.3s ease;
  }

  .mobile-menu-toggle.active .hamburger-line:nth-child(1) {
    transform: rotate(45deg) translate(6px, 6px);
  }

  .mobile-menu-toggle.active .hamburger-line:nth-child(2) {
    opacity: 0;
  }

  .mobile-menu-toggle.active .hamburger-line:nth-child(3) {
    transform: rotate(-45deg) translate(6px, -6px);
  }

  /* Mobile Navigation */
  .mobile-nav-overlay {
    position: fixed;
    top: 70px;
    left: 0;
    right: 0;
    bottom: 0;
    background: #fbfcff;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    z-index: 999;
    overflow-y: auto;
  }

  .mobile-nav-overlay.active {
    transform: translateX(0);
  }

  .mobile-nav {
    padding: 1.5rem;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .mobile-search {
    margin-bottom: 2rem;
  }

  .mobile-search-form {
    display: flex;
    gap: 0.5rem;
  }

  .mobile-search-input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 1px solid #c4ecb1;
    border-radius: 8px;
    font-size: 1rem;
    background: #fbfcff;
  }

  .mobile-search-input:focus {
    outline: none;
    border-color: #1c4219;
  }

  .mobile-search-btn {
    background: #1c4219;
    color: #fbfcff;
    border: none;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    cursor: pointer;
  }

  .mobile-menu-links {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .mobile-nav-link {
    text-decoration: none;
    color: #1c4219;
    font-size: 1.1rem;
    font-weight: 500;
    padding: 1rem 0;
    border-bottom: 1px solid #e3f5d7;
    transition: color 0.2s ease;
  }

  .mobile-nav-link:hover {
    color: #558d4b;
  }

  .mobile-menu-footer {
    margin-top: 2rem;
    padding-top: 1rem;
    border-top: 1px solid #e3f5d7;
  }

  .mobile-account-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    color: #1c4219;
    font-weight: 500;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .desktop-nav {
      display: none !important;
    }

    .header-search {
      display: none !important;
    }

    .mobile-menu-toggle {
      display: flex !important;
    }

    .header-container {
      padding: 0 0.75rem;
    }

    .brand-title {
      font-size: 1.25rem;
    }
  }

  @media (max-width: 480px) {
    .header-container {
      height: 60px;
    }

    .mobile-nav-overlay {
      top: 60px;
    }

    .brand-title {
      font-size: 1.1rem;
    }

    .header-icons {
      gap: 0.5rem;
    }
  }
{% endstylesheet %}

{% javascript %}
  // Mobile Menu Functionality
  document.addEventListener('DOMContentLoaded', function () {
    const mobileToggle = document.querySelector('.mobile-menu-toggle');
    const mobileOverlay = document.querySelector('.mobile-nav-overlay');
    const body = document.body;

    if (mobileToggle && mobileOverlay) {
      mobileToggle.addEventListener('click', function () {
        const isActive = mobileOverlay.classList.contains('active');

        if (isActive) {
          mobileOverlay.classList.remove('active');
          mobileToggle.classList.remove('active');
          mobileToggle.setAttribute('aria-expanded', 'false');
          body.style.overflow = '';
        } else {
          mobileOverlay.classList.add('active');
          mobileToggle.classList.add('active');
          mobileToggle.setAttribute('aria-expanded', 'true');
          body.style.overflow = 'hidden';
        }
      });

      // Close mobile menu when clicking on a link
      const mobileLinks = mobileOverlay.querySelectorAll('a');
      mobileLinks.forEach((link) => {
        link.addEventListener('click', function () {
          mobileOverlay.classList.remove('active');
          mobileToggle.classList.remove('active');
          mobileToggle.setAttribute('aria-expanded', 'false');
          body.style.overflow = '';
        });
      });

      // Close mobile menu when clicking outside
      mobileOverlay.addEventListener('click', function (e) {
        if (e.target === mobileOverlay) {
          mobileOverlay.classList.remove('active');
          mobileToggle.classList.remove('active');
          mobileToggle.setAttribute('aria-expanded', 'false');
          body.style.overflow = '';
        }
      });
    }
  });
{% endjavascript %}

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu"
    }
  ]
}
{% endschema %}
